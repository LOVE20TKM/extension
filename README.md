# 扩展协议的使用场景

LOVE20 默认的行动激励方式不能满足行动的要求时，可以开发并部署扩展协议，让扩展协议来决定行动新的激励验证与分配方式，提升行动激励的公平与效率，为行动增加各种新的玩法。

# 如何开发并在行动中使用扩展协议

## 1. 开发工厂合约

基于 ILOVE20ExtensionFactory，开发扩展协议工厂合约，基于 ILOVE20Extension 开发具体扩展协议

### 基类选择建议（规范）

在本仓库约定下，具体扩展协议合约应当至少具备一种“加入/退出”机制（面向用户的参与入口），因此：

- 推荐：继承 `LOVE20ExtensionBaseRewardJoin`（免代币参与）或 `LOVE20ExtensionBaseRewardTokenJoin`（ERC20 参与），以及其更高层组合（例如 AutoScore 版本）
- 不建议：自行从更底层基类“拼装继承链”，导致参与入口、参与者集合与后续验证/分配流程不一致

## 2. 部署工厂合约

部署工厂合约，并在 Center 里使用 addFactory 注册添加 扩展协议工厂合约（调用者需持有 0.3%治理票）

各网络的 Center 合约地址，详见 script/network/[network]/address.extension.center.params

## 3. 创建扩展合约

使用工厂合约，创建具体行动所使用的扩展协议合约

## 4. 关联扩展合约

发起行动，并在白名单中填写扩展协议合约地址，并对行动进行投票

## 5. 初始化扩展合约

行动阶段，初始化扩展协议

- 先发送 1 个代币给扩展合约
- Center 合约调用 initializeExtension 将触发扩展协议加入行动
- Center 合约检查扩展合约是否真正成功参与行动，成功后将此扩展协议添加到 Center 中
